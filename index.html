<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kantine</title>
    
    <!-- VerknÃ¼pfung zur CSS-Datei (styles.css) -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 
    ====================================
    KANTINE-APP - HTML STRUKTUR
    ====================================
    
    Diese Datei enthÃ¤lt die komplette HTML-Struktur der App.
    
    AUFBAU:
    - Die App besteht aus verschiedenen "Bereichen" (div mit id)
    - Immer nur EIN Bereich ist sichtbar, die anderen sind "hidden"
    - Die Bereiche werden per JavaScript ein-/ausgeblendet
    
    BEREICHE:
    1. startseite - Kategorieauswahl
    2. benutzer-auswahl - Personenauswahl
    3. bestell-bereich - Produktauswahl & Warenkorb
    4. koch-bereich - Einkaufsliste & Schulden
    5. guthaben-login - Passwort-Eingabe
    6. guthaben-kategorie - Kategorie fÃ¼r Verwaltung
    7. guthaben-personen - Guthaben aufladen/abziehen
    8. preisverwaltung - Preise Ã¤ndern
    
    WICHTIG:
    - Alle onclick-Attribute rufen JavaScript-Funktionen auf
    - Die Funktionen sind in app.js definiert
    -->
    <div class="container">
        <!-- 
        ====================================
        HEADER-BUTTONS (oben rechts)
        ====================================
        Diese Buttons sind immer sichtbar:
        - KÃ¼che: Ã–ffnet Koch-Bereich (KEIN Passwort)
        - Verwaltung: Ã–ffnet Admin-Login (MIT Passwort)
        -->
        <div class="header-buttons-container">
            <button class="header-btn" onclick="kochBereichOeffnen()">ğŸ‘¨â€ğŸ³ KÃ¼che</button>
            <button class="header-btn" onclick="guthabenVerwaltungLoginOeffnen()">âš™ï¸ Verwaltung</button>
        </div>

        <!-- 
        ====================================
        BEREICH 1: STARTSEITE
        ====================================
        Erste Seite die der Benutzer sieht.
        Auswahl der Kategorie (Wachabteilung, B-Dienst, etc.)
        -->
        <div id="startseite">
            <h1>ğŸ½ï¸ Kantine</h1>
            
            <div class="kategorie-grid">
                <button class="kategorie-btn" onclick="kategorieAuswaehlen('wachabteilung')">
                    Wachabteilung
                </button>
                <button class="kategorie-btn" onclick="kategorieAuswaehlen('bdienst')">
                    B-Dienst
                </button>
                <button class="kategorie-btn" onclick="kategorieAuswaehlen('notarzt')">
                    Notarzt
                </button>
                <button class="kategorie-btn" onclick="kategorieAuswaehlen('azubi')">
                    Auszubildende
                </button>
                <button class="kategorie-btn" onclick="kategorieAuswaehlen('gaeste')">
                    GÃ¤ste
                </button>
            </div>
        </div>

        <!-- 
        ====================================
        BEREICH 2: BENUTZER-AUSWAHL
        ====================================
        Zeigt alle Personen der gewÃ¤hlten Kategorie.
        Bei GÃ¤sten/Notarzt/Azubi: Leere Platzhalter + Name-Eingabe
        -->
        <div id="benutzer-auswahl" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZurStartseite()">â† ZurÃ¼ck</button>
            
            <!-- Schulden-Warnung (nur bei Wachabteilung) -->
            <div id="schulden-warnung-box" class="hidden"></div>
            
            <h1 id="kategorie-titel">Benutzer auswÃ¤hlen</h1>
            
            <!-- Info: Automatisch sortiert 
            <div class="sortier-info">
                ğŸ“‹ Sortiert nach Nachnamen (A-Z)
            </div>
            -->

            
            <!-- Benutzer-Liste (normale Seiten-Scroll) -->
            <div class="benutzer-grid" id="benutzer-liste"></div>
            
            <!-- Name-Eingabe: Wird bei GÃ¤sten, Notarzt und Auszubildende angezeigt -->
            <div id="platzhalter-eingabe-bereich" class="hidden">
                <div class="gast-eingabe">
                    <h2>Name eingeben</h2>
                    <input 
                        type="text" 
                        id="platzhalter-name-input" 
                        placeholder="Name eingeben"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="words"
                    >
                    <button class="success" onclick="platzhalterNameSetzen()">Name speichern & weiter</button>
                </div>
            </div>
        </div>

        <!-- 
        ====================================
        BEREICH 3: BESTELL-BEREICH
        ====================================
        Hier kann der Benutzer:
        - Produkte mit +/- Buttons auswÃ¤hlen
        - Individuellen Betrag eingeben
        - Warenkorb sehen (Zusammenfassung)
        - Bestellung abschlieÃŸen
        - Heutige Bestellungen sehen (TagesÃ¼bersicht)
        -->
        <div id="bestell-bereich" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZuBenutzerauswahl()">â† ZurÃ¼ck</button>
            
            <div class="guthaben-box">
                <div>Angemeldet als: <strong id="aktueller-benutzer"></strong></div>
                <div class="guthaben-betrag" id="guthaben-anzeige">0.00 â‚¬</div>
            </div>

            <h2>Produkte auswÃ¤hlen</h2>
            
            <!-- KATEGORISIERTE PRODUKTE -->
            <div id="produkte-container"></div>

            <!-- INDIVIDUELLER BETRAG -->
            <div class="individueller-betrag">
                <h3>ğŸ’¶ Individueller Betrag</h3>
                <p style="color: #7f8c8d; font-size: 14px; margin-bottom: 10px;">
                    FÃ¼r Sonderartikel oder manuelle BetrÃ¤ge
                </p>
                <div class="betrag-eingabe-container">
                    <input 
                        type="number" 
                        id="individueller-betrag-input" 
                        placeholder="Betrag in â‚¬ (z.B. 2.50)" 
                        step="0.01"
                        inputmode="decimal"
                        autocomplete="off"
                    >
                    <input 
                        type="text" 
                        id="individueller-bezeichnung-input" 
                        placeholder="Bezeichnung (optional)"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="words"
                    >
                    <button onclick="individuellenBetragHinzufugen()">HinzufÃ¼gen</button>
                </div>
            </div>

            <h2>Warenkorb</h2>
            <div id="warenkorb"></div>
            <div style="text-align: right; margin-top: 20px;">
                <strong style="font-size: 24px; color: #2c3e50;">Summe: <span id="summe-anzeige">0.00</span> â‚¬</strong>
            </div>
            
            <button class="primary" onclick="bestellungAbschliessen()" style="width: 100%; padding: 20px; font-size: 20px; margin-top: 20px;">
                Jetzt bestellen
            </button>

            <!-- Benutzer-TagesÃ¼bersicht (Accordeon) -->
            <div class="tagesuebersicht-accordeon" id="benutzer-tagesuebersicht-accordeon" style="margin-top: 30px;">
                <button class="tagesuebersicht-header" onclick="benutzerTagesuebersichtToggle()">
                    <span>ğŸ“¦ Meine heutigen Bestellungen</span>
                    <span class="tagesuebersicht-badge" id="benutzer-tagesuebersicht-badge">0 Bestellungen</span>
                    <span class="tagesuebersicht-arrow" id="benutzer-tagesuebersicht-arrow">â–¼</span>
                </button>
                <div class="tagesuebersicht-inhalt hidden" id="benutzer-tagesuebersicht-inhalt">
                    <div id="benutzer-tagesuebersicht-liste"></div>
                </div>
            </div>
        </div>

        <!-- 
        ====================================
        BEREICH 4: KOCH-BEREICH
        ====================================
        WICHTIG: Kein Passwort erforderlich!
        
        Zeigt:
        - Einkaufsliste (wie viele BrÃ¶tchen etc. bestellt wurden)
        - Gesamtschulden (Summe aller negativen Guthaben)
        - Tagesabschluss-Button (setzt Einkaufsliste auf 0)
        -->
        <div id="koch-bereich" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZurStartseite()">â† ZurÃ¼ck</button>
            
            <h1>ğŸ‘¨â€ğŸ³ KÃ¼chen-Bereich</h1>

            <!-- Einkaufsliste -->
            <div class="einkaufsliste">
                <h2>ğŸ“‹ Einkaufsliste</h2>
                <div id="einkaufsliste-anzeige"></div>
                <button class="danger" onclick="tagesabschluss()" style="margin-top: 20px; width: 100%; padding: 15px;">
                    ğŸ—‘ï¸ Tagesabschluss (Einkaufsliste/Tagesbestellungen auf 0 setzen & Backup)
                </button>
            </div>

            <!-- Abendessen-Abrechnung -->
            <div class="einkaufsliste" style="background: #fff3cd; border: 2px solid #ffc107;">
                <h2>ğŸ½ï¸ Abendessen abrechnen</h2>
                <div id="abendessen-liste"></div>
            </div>

            <!-- Schulden-Ãœbersicht (GESAMT) -->
            <div class="schulden-box">
                <h2>ğŸ’° Gesamtschulden</h2>
                <div class="schulden-betrag" id="schulden-betrag">0.00 â‚¬</div>
            </div>
        </div>

        <!-- ===== GUTHABEN-VERWALTUNG LOGIN ===== -->
        <div id="guthaben-login" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZurStartseite()">â† ZurÃ¼ck</button>
            
            <h1>âš™ï¸ Verwaltung</h1>
            
            <div class="admin-section">
                <h2>Passwort eingeben</h2>
                <input type="password" id="admin-passwort" placeholder="Passwort">
                <button class="primary" onclick="guthabenVerwaltungLogin()">Anmelden</button>
            </div>
        </div>

        <!-- ===== GUTHABEN-VERWALTUNG KATEGORIE-AUSWAHL ===== -->
        <div id="guthaben-kategorie" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="guthabenVerwaltungAbmelden()">â† Guthaben-Verwaltung verlassen</button>
            
            <h1>ğŸ’³ Guthaben verwalten</h1>
            
            <div class="kategorie-grid">
                <button class="kategorie-btn" onclick="guthabenKategorieAuswaehlen('wachabteilung')">
                    Wachabteilung
                </button>
                <button class="kategorie-btn" onclick="guthabenKategorieAuswaehlen('bdienst')">
                    B-Dienst
                </button>
                <button class="kategorie-btn" onclick="guthabenKategorieAuswaehlen('notarzt')">
                    Notarzt
                </button>
                <button class="kategorie-btn" onclick="guthabenKategorieAuswaehlen('azubi')">
                    Auszubildende
                </button>
                <button class="kategorie-btn" onclick="guthabenKategorieAuswaehlen('gaeste')">
                    GÃ¤ste
                </button>
            </div>
            
            <!-- VERWALTUNGS-BUTTONS (einheitlich gestylt) -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 40px; padding-top: 30px; border-top: 2px solid #ecf0f1;">
                <button class="kategorie-btn" onclick="preisverwaltungOeffnen()" style="width: 400px; background: #ecf0f1; border-color: #95a5a6;">
                    ğŸ’¶ Preisverwaltung
                </button>

                <button class="kategorie-btn" onclick="wachabteilungBearbeitenOeffnen()" style="width: 400px; background: #ecf0f1; border-color: #95a5a6;">
                    ğŸ‘¥ Wachabteilung bearbeiten
                </button>
            </div>

            <!-- BACKUP & RESTORE BUTTONS -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 40px; padding-top: 30px; border-top: 2px solid #ecf0f1;">
                <h3 style="color: #7f8c8d; margin-bottom: 8px;">ğŸ’¾ Datensicherung</h3>
                
                <button class="kategorie-btn" onclick="backupErstellen()" style="width: 400px; background: #3498db; border-color: #2980b9; color: white;">
                    ğŸ’¾ Backup erstellen
                </button>
                
                <button class="kategorie-btn danger" onclick="backupWiederherstellen()" style="width: 400px;">
                    ğŸ”´ Backup wiederherstellen
                </button>
                
                <p style="color: #95a5a6; font-size: 13px; max-width: 500px; margin: 15px auto 0; text-align: center;">
                    <strong>Tipp:</strong> Erstelle regelmÃ¤ÃŸig ein Backup, um deine Daten zu sichern. 
                    Bei App-Updates: Backup erstellen â†’ Browser-Daten lÃ¶schen â†’ Backup wiederherstellen.
                </p>
            </div>
        </div>

        <!-- ===== GUTHABEN-VERWALTUNG PERSONEN-LISTE ===== -->
        <div id="guthaben-personen" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZuGuthabenKategorie()">â† ZurÃ¼ck zu Kategorien</button>
            
            <h1 id="guthaben-kategorie-titel">Guthaben verwalten</h1>
            
            <div id="guthaben-personen-liste"></div>
        </div>

        <!-- ===== PREISVERWALTUNG (SEPARATE SEITE) ===== -->
        <div id="preisverwaltung" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZuGuthabenKategorie()">â† ZurÃ¼ck</button>
            
            <h1>ğŸ’¶ Preisverwaltung</h1>
            <p style="text-align: center; color: #7f8c8d; font-size: 14px; margin-bottom: 25px;">
                
            </p>
            
            <div id="preisverwaltung-liste"></div>
        </div>

        <!-- ===== WACHABTEILUNG BEARBEITEN ===== -->
        <div id="wachabteilung-bearbeiten" class="hidden">
            <button class="zurÃ¼ck-btn" onclick="zurÃ¼ckZuGuthabenKategorie()">â† ZurÃ¼ck</button>
            
            <h1>ğŸ‘¥ Wachabteilung bearbeiten</h1>
            <p style="text-align: center; color: #7f8c8d; font-size: 14px; margin-bottom: 25px;">
                Personen zur Wachabteilung hinzufÃ¼gen oder entfernen
            </p>

            <!-- Person hinzufÃ¼gen -->
            <div class="gast-eingabe" style="max-width: 600px; margin: 0 auto 30px;">
                <h2>â• Person hinzufÃ¼gen</h2>
                <input 
                    type="text" 
                    id="wachabteilung-name-input" 
                    placeholder="Name der Person (z.B. Max Mustermann)"
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="words"
                >
                <button class="success" onclick="wachabteilungPersonHinzufugen()">Person hinzufÃ¼gen</button>
            </div>

            <!-- Personen-Liste -->
            <div id="wachabteilung-personen-liste"></div>
        </div>

        <!-- Meldungen -->
        <div id="meldung" class="meldung"></div>
    </div>


    <script src="app.js"></script>
</body>
</html>
